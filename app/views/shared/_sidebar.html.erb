<!--

SIDEBAR
The Sidebar only appears when the user is logged in.

See application.html.erb for where it gets rendered.

-->

<div class="sidebar my-stuff">

  <!-- WINNITRON BRAND STUFF -->

  <div class="col-xs-12">
    <ul class="nav navbar-nav">
      <li><%= link_to "my account", edit_user_registration_path  %></li>
      <li><%= link_to "my profile", current_user %></li>
      <li><%= link_to "feedback", feedback_path %></li>
    </ul>
  </div>



  <!-- USER CONTENT -->

  <% if current_user.builder? || current_user.admin? %>
  <div>
    <h3>
      My Winnitrons
      <span class="pull-right">
        <a href="<%= new_arcade_machine_path %>">
          <i class="fa fa-plus-circle" aria-hidden="true"></i>
        </a>
      </span>
    </h3>

    <% current_user.arcade_machines.each do |machine| %>
      <%=
        render "shared/item_cards_small",
        item_name: machine.title,
        item_info: machine.location,
        item_link: arcade_machine_path(machine),
        item_image_url: machine.cover_image.url(w: 115)
      %>
    <% end %>

  </div>

  <hr/>

  <% end %>


  <div>
    <h3>
      My Games
      <span class="pull-right">
        <a href="<%= new_game_path %>" title="Add a game">
          <i class="fa fa-plus-circle" aria-hidden="true"></i>
        </a>
      </span>
    </h3>


    <% current_user.games.each do |game| %>
      <%=
        render "shared/item_cards_wide",
        item_name: game.title,
        item_info: "",
        item_link: game_path(game),
        item_image_url: game.cover_image.url(w: 375)
      %>
    <% end %>
  </div>

  <hr />

  <div>
    <h3>
      My Playlists
      <span class="pull-right">
        <a href="<%= new_playlist_path %>" title="Create a playlist">
          <i class="fa fa-plus-circle" aria-hidden="true"></i>
        </a>
      </span>
    </h3>

    <% current_user.playlists.each do |playlist| %>
      <div class="playlist">
        <strong><%= link_to playlist.title, playlist_path(playlist) %></strong>
      </div>
    <% end %>
  </div>

  <br/><br/>
</div>
